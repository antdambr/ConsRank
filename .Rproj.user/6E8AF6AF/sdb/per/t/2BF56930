{
    "collab_server" : "",
    "contents" : "#' FAST algorithm calling DECOR\n#'\n#' FAST algorithm repeats DECOR a prespecified number of time. \n#' It returns the best solutions among the iterations\n#'\n#' @param X A N by M data matrix, in which there are N judges and M objects to be judged. Each row is a ranking of the objects which are represented by the columns. Alternatively X can contain the rankings observed only once. In this case the argument Wk must be used\n#' @param Wk Optional: the frequency of each ranking in the data\n#' @param maxiter maximum number of iterations. Default 10\n#' @param NP The number of population individuals\n#' @param L Generations limit: maximum number of consecutive generations without improvement\n#' @param FF The scaling rate for mutation. Must be in [0,1]\n#' @param CR The crossover range. Must be in [0,1]\n#' @param FULL Default FULL=FALSE. If FULL=TRUE, the searching is limited to the space of full rankings. In this case, the data matrix must contain full rankings.\n#' @param PS Default PS=TRUE. If PS=TRUE the number of a multiple of 5 iterations is diplayed\n#'\n#' @return a \"list\" containing the following components:\n#' \\tabular{lll}{\n#' Consensus \\tab  \\tab the Consensus Ranking\\cr\n#' Tau \\tab       \\tab averaged TauX rank correlation coefficient\\cr\n#' Eltime\\tab   \\tab Elapsed time in seconds}\n#' \n#' @references D'Ambrosio, A., Mazzeo, G., Iorio, C., and Siciliano, R. (2017). A differential evolution algorithm for finding the median ranking under the Kemeny axiomatic approach. Computers and Operations Research, vol. 82, pp. 126-138. \n#' \n#' @author Antonio D'Ambrosio \\email{antdambr@unina.it} and Giulio Mazzeo \\email{giuliomazzeo@gmail.com}\n#' \n#' @examples \n#' #data(EMD)\n#' #CR=FASTDECOR(EMD[,1:15],EMD[,16])\n#' \n#' @keywords Median ranking\n#' @keywords Differential evolution\n#' \n#' @export\n\n\nFASTDECOR = function(X,Wk=NULL,maxiter=10,NP=15,L=100,FF=0.4,CR=0.9,FULL=FALSE,PS=TRUE){\n  \n  #check if X is a matrix\n  if (class(X)==\"data.frame\") {\n    #colnames(X)=NULL\n    X=as.matrix(X)\n  }\n  \n  M = nrow(X)\n  N=ncol(X)\n  tic = proc.time()[3]  \n  \n  #check if there are trivial solutions\n  \n  if (M==1) { \n    consensus = X\n    TauX = 1\n    \n  } else {\n    \n    if (!is.null(Wk)) {\n      \n      if (is.numeric(Wk)) {\n        Wk=matrix(Wk,ncol=1)\n        NJ=sum(Wk)\n      }\n      \n      cij = combinpmatr(X,Wk)\n      \n    } else {\n      \n      cij = combinpmatr(X)\n      NJ=nrow(X)\n    }\n    \n    \n    if (sum(cij==0)==length(cij)){\n      print(\"Combined Input Matrix contains only zeros: any ranking in the reference universe is a median ranking\")\n      return()\n      \n    } \n    \n    if (sum(sign(cij+diag(N)))==length(cij)){\n      print(\"Combined Input Matrix contains only positive values: the median ranking is the all-tie solution\")\n      return()\n      \n    }\n    \n    \n    sol=matrix(0,1,N)\n    taos=0\n    \n    for (iter in 1:maxiter){\n    COR=DECORcore(cij,NJ,NP,L,FF,CR,FULL)\n    \n    sol=rbind(sol,COR$ConsR)\n    taos=rbind(taos,COR$Tau)\n    \n    if (PS==TRUE) {\n      \n      if (iter%%5==0){\n      \n      dsp1=paste(\"Iteration\",iter,sep=\" \")\n      print(dsp1)\n      }\n      \n    }\n\n    \n    }\n    \n  }\n  \n  sol=sol[-1,]\n  taos=matrix(taos[-1],(length(taos)-1),1)\n  \n  if (is.null(nrow(sol))){sol=matrix(sol,1,N)}\n  \n  bestindex=which(taos==max(taos))\n  sol=sol[bestindex,]\n  taos=max(taos)\n  \n  if (is.null(nrow(sol))){\n    sol=matrix(sol,1,N)\n    Consensus=sol\n  } else {\n    Consensus=unique(sol)\n  }\n  \n  if (is.null(nrow(Consensus))){\n    Consensus=matrix(Consensus,1,N)\n    }\n\n  TauX=matrix(rep(taos),nrow(Consensus),1)\n  colnames(Consensus)=colnames(X) \n  row.names(Consensus)=NULL\n  \n  \n  toc=proc.time()[3]\n  eltime=toc-tic\n  return(list(Consensus=reordering(Consensus), Tau=TauX, Eltime=eltime) )\n}\n",
    "created" : 1491675136044.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2834829026",
    "id" : "2BF56930",
    "lastKnownWriteTime" : 1492787444,
    "last_content_update" : 1492787444130,
    "path" : "~/R projects Antonio/ConsRank/R/FASTDECOR.R",
    "project_path" : "R/FASTDECOR.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}