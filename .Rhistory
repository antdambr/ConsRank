#consensus<-reordering(consensus)
eltime<-toc-tic
return(list(Consensus=reordering(consensus), Tau=TauX, Eltime=eltime) )
}
#-------------------------------------------------------------------------------
combincost <- function(ranking,cij,M){
if (!is(ranking,"matrix")){ranking<-matrix(ranking,1,length(ranking))}
N <- ncol(ranking)
sij <- scorematrix(ranking)
# max distance
maxdist <- (N*(N-1))
# computing the tau
t <- sum(sum(cij*sij))/(M*(N*(N-1)))
# computing the distance (from tau)
c <- (maxdist/2)*(1-t)*M;
return(list(tp=t,cp=c))
}
consrank(myd)
EMCons(myd)
require(ConsRank)
EMCons <- function(X,Wk=NULL,PS=TRUE) {
out=consrank(X,wk=Wk,ps=PS)
return(out)
}
EMCons(myd)
?devtools
install.packages("devtools")
install.packages("C:/Users/Antonio/Dropbox/Disco D/R projects Antonio/ConsRank_2.1.0.tar.gz", repos = NULL, type = "source")
?ConsRank
?consrank
install.packages("ConsRank")
x <- c("Cat", "CAT", "cAt")
str_view(x, "cat")
library(ConsRank)
consrank(c(1,4,2,3))
consrank(c(1,4,2,3),algorithm="quick")
library(ConsRank)
consrank(c(1,4,2,3),algorithm="quick")
consrank(c(1,4,2,3),algorithm="fast")
library(ConsRank)
data("APAFULL")
consrank(APAFULL)
vignette("smacof")
?polyplot
require(ConsRank)
polyplot
polyplot()
polyplot(nobj=4)
polyplot()
library(ConsRank)
uff=rbind(c("{gioia sannitica","cusano mutri}","telese","cerreto sannita"),c("cusano mutri","{gioia sannitica","telese","cerreto sannita}"))
uff
order2rank(uff)
library(ConsRank)
order2rank(uff)
uff
library(ConsRank)
require(ConsRank)
data(APAred)
consrank(APAred)
data(APA)
data("APAFULL")
data(APAFULL)
consrank(APAFULL)
APAFULL
U4=univranks(4,ordering=FALSE)$Runiv
consrank(U4)
partitions(3,2)
partk(4,3)
insert <- function(part,n,elements=NULL,stack=1){
# perform all possible insertions
#----preprocessing----------------------------------
if(is(elements,"NULL")){elements<-letters[seq(1:n)]}
if (length(part)==1){ #if1
l<-1
open<-NULL
close<-NULL
} else {
if (!is(part,"matrix")){part<-matrix(part,1,length(part))}
open<-unlist(gregexpr(pattern ='\\{',part))
close<-unlist(gregexpr(pattern ='\\}',part))
if (length(which(open>=1)) + length(which(close>=1)) == 0){ #if2
l <- ncol(part)
} else {
sequ<-rowSums(cbind(apply(part,1,function(x) unlist(gregexpr(pattern ='\\{',part))),
apply(part,1,function(x) unlist(gregexpr(pattern ='\\}',part)))))
#sequ=rbind(sequ,seq(1:length(sequ)))
buckets<-vector(mode="list")
checka<-FALSE
i<-1
k<-1
inda<-NA
while(checka==FALSE){
if (sequ[i]==0){  #if the sequence starts with a tied ranking
checkb<-FALSE
while(checkb==FALSE){
if (sequ[i]==1){
inda<-cbind(inda,i)
inda<-inda[-1]
buckets[[k]]<-part[inda]
inda<-NA
k<-k+1
i<-i+1
checkb<-TRUE
} else {
inda<-cbind(inda,i)
i<-i+1
}
} #end while checkb
} else if (sequ[i]==-2){ # if the sequence starts with an object not in a tie
checkc<-FALSE
while(checkc==FALSE){
inda<-cbind(inda,i)
inda<-inda[-1]
buckets[[k]]<-part[inda]
i<-i+1
k<-k+1
checkc<-TRUE
}
# if (i==length(sequ)){
#   inda=cbind(inda,i)
#   inda=inda[-1]
#   buckets[[k]]=part[inda]
#   i=i+1
#   checkc=TRUE
# } else if (sequ[(i+1)]==0){
#
#   inda=cbind(inda,i)
#   inda=inda[-1]
#   buckets[[k]]=part[inda]
#   inda=NA
#   i=i+1
#   k=k+1
#   checkc=TRUE
#
# } else {
#
#
#   inda=cbind(inda,i)
#   i=i+1
#
# }
# } #end while c
} # end if statements
if (i>length(sequ)){checka<-TRUE}
} #while 1
l<-length(buckets)
}  #end if2
}#end if1
#---------end preprocessing---------------------------
en <- elements[n]
if (stack==0){
m<-l
} else if (stack==2){
m <- 1
} else {
m<-l+1
}
part_i <- vector(mode = "list", length = m)
part_ib <- vector(mode = "list", length = m)
if (length(which(open>=1)) + length(which(close>=1)) == 0){ #if there are no ties
if(stack<=1){#if stack <=1
#for (j in 1:(m-1)){part_i[[j]]=part}
for (i in 1:l){
part_i[[i]]<-part
if (is(part_i[[i]],"numeric")){part_i[[i]]<-as.character(part_i[[i]])}
indice<-1:length(part_i[[i]])
indice[indice>=i]<-indice[indice>=i]+1
part_ib[[i]][indice]<-part_i[[i]]
part_ib[[i]][i]<-paste("{",part_i[[i]][i],sep="")
part_ib[[i]][(i+1)]<-paste(en,"}",sep="")
}
}#end if stack <=1
if (stack>=1){
part_ib[[m]]<-as.character(cbind(part,en))
}
} else  {  #if there are ties
if (stack<=1){ #if stack >=1
for (i in 1:l){
if (is(buckets[[i]],"numeric")){buckets[[i]]<-as.character(buckets[[i]])}
buck<-buckets[[i]]
buck<-gsub("\\{", "", buck)
buck<-gsub("\\}", "", buck)
buck<-cbind(list.cbind(buck),en)
buck[1]<-paste("{",buck[1],sep="")
buck[length(buck)]<-paste(buck[length(buck)],"}",sep="")
rasp<-buckets
rasp[[i]]<-buck
part_ib[[i]]<-unlist(rasp)
}
}#end if stack >=1
if (stack>=1){
part_ib[[m]]<-as.character(cbind(list.cbind(unlist(buckets)),en))
}
} #end if there are no ties
return(list.rbind(part_ib))
}
partall2 <- function(n, elements=NULL){
# Return the cell list of all partitions of the integer set {1:n}
# Output LIST is the cell of size (b x 1), where b is Bell number Bn
# Each list{j} is a partition of {1:n}
if(is(elements,"NULL")){elements<-letters[seq(1:n)]}
if (n==1){
lista<-elements[n]
} else {
lp<-partall2((n-1),elements) #recursive call to partall2
if(is(nrow(lp),"NULL")){k<-length(lp)}else{k<-nrow(lp)}
for (i in 1:k){
if(k==1){llp<-lp[i]}else{llp<-lp[i,]}
pa<-insert(llp,n,elements)
if (i==1){lista<-pa}else{lista<-rbind(lista,pa)}
}
}
return(lista)
}
partk<-function(n,k,elements=NULL){
if(is(elements,"NULL")){elements<-letters[seq(1:n)]}
if(k==1){
lista<-matrix(elements,1,length(elements))
lista[1]<-paste("{",lista[1],sep="")
lista[length(lista)]<-paste(lista[length(lista)],"}",sep="")
} else if (k==length(elements)) {
lista<-matrix(as.character(elements),1,length(elements))
} else {
m<-n-k+1
L<-vector(mode="list", length=m)
for (j in 1:m){
L[[j]]<-elements[1:j]
if(j>1){
L[[j]][1]<-paste("{",L[[j]][1],sep="")
L[[j]][length(L[[j]])]<-paste(L[[j]][length(L[[j]])],"}",sep="")
}
}
#SN=stirling2(n,k)
for (kk in 2:k){ #for #2
L[[1]]<-elements[1:kk]
for (j in 2:m){# for #3
nu<-j+kk-1
#lista=vector(mode="list", length= SN$SM[nu,kk])
lp<-L[[j]]
if(is(nrow(lp),"NULL")){
tt<-1} else {
tt<-nrow(lp)
}
if(tt>1){
for(i in 1:tt){
part_i<-insert(lp[i,],nu,elements,stack=2)
if (i==1){lista1<-part_i}else{lista1<-rbind(lista1,part_i)}
}
} else {
lista1<-insert(matrix(lp,1,length(lp)),nu,elements,stack=2)
}
lp<-L[[(j-1)]]
if(is(nrow(lp),"NULL")){
tt<-1} else {
tt<-nrow(lp)
}
if(tt>1){
for(i in 1:tt){
part_i<-insert(lp[i,],nu,elements,stack=0)
if (i==1){lista2<-part_i}else{lista2<-rbind(lista2,part_i)}
}
} else {
lista2<-insert(matrix(lp,1,length(lp)),nu,elements,stack=0)
}
L[[j]]<-rbind(lista1,lista2)
}#end for3
}#end for2
lista<-L[[m]]
}#end first if
return(lista)
}#end function
partk(4,3)
require(rlist)
partk(4,3)
library(ConsRank)
library(ConsRank)
library(ConsRank)
data(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
P
IW_kemenyd(x=sports[c(1,3,5,7),], w= P)
library(ConsRank)
library(ConsRank)
data(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
IW_kemenyd(x=sports[c(1,3,5,7),], w= P)
library(ConsRank)
IW_kemenyd(x=sports[c(1,3,5,7),], w= P)
sports[c(1,3,5,7),]
IW_kemenyd(x=sports[1,],y=sports[c(3,5,7),], w= P)
IW_tau_x(x=sports[c(1,3,5,7),], w= P)
matrix(,2,2)
prova=3
is(prova,NULL)
is(prova,"NULL")
!is(prova,"NULL")
!is(dim(prova),"NULL")
is(dim(prova),"NULL")
riprova=FALSE
riptova==FALSE
riprova==FALSE
consrank(APAred,algorithm="quick",FULL=TRUE)
consrank(APAred,algorithm="quick",full =TRUE)
consrank(APAred,algorithm="quick")
consrank(APAFULL,algorithm="quick")
APA=APAFULL
APA[APA==NA]=5
APA
APA[is.na(APA)]=5
APA
consrank(APAFULL,algorithm="quick")
tabulaterows(APA)
APAFULL
tabulaterows(APA)
APA=APAFULL
APA
is.na(APA)
APA[is.na(APA)] <- 5
APA
tabulaterows(APA)
tabulaterows(APA)$tabfreq
View(APA)
reordering(APA)
APA=reordering(APA)
tabulaterows(APA)$tabfreq
consrank(APA,algorithm="quick")
consrank(APA,algorithm="quick",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="quick",full=TRUE)
consrank(APA,algorithm="quick")
consrank(APA,algorithm="fast")
consrank(APA,algorithm="fast",full=TRUE)
consrank(APA,algorithm="decor",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="decor",full=TRUE)
consrank(APA,algorithm="decor",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="decor",full=TRUE)
matrix(rep(0.3,1),1,1)
consrank(APA,algorithm="decor",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="decor",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="decor",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="decor",full=TRUE)
library(ConsRank)
consrank(APA,algorithm="decor",full=TRUE)
consrank(APA,algorithm="decor")
data(sports)
dim(sports)
dim(sports)[2]
install.packages("rcmdcheck")
require(rcmdcheck)
?rcmdcheck
rcmdcheck()
rcmdcheck(path="C:/Users/Antonio/Dropbox/Disco D/R projects Antonio/ConsRank")
library(ConsRank)
?iwcombinpmatr
data(sports)
np <- dim(sports)[2]
P <- matrix(NA,nrow=np,ncol=np)
P[1,] <- c(0,5,5,10,10,10,10)
P[2,] <- c(5,0,5,10,10,10,10)
P[3,] <- c(5,5,0,10,10,10,10)
P[4,] <- c(10,10,10,0,5,5,5)
P[5,] <- c(10,10,10,5,0,5,5)
P[6,] <- c(10,10,10,5,5,0,5)
P[7,] <- c(10,10,10,5,5,5,0)
CIW <- iwcombinpmatr(sports,w=P)
CIW
?iwquickcons
data("German")
w=c(10,5,5,10)
iwquickcons(X= German,w= w)
data(sports)
dim(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
iwquickcons(X= sports, w= P)
data(sports)
dim(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
iwquickcons(X= sports, w= P, FULL=TRUE)
library(ConsRank)
data(sports)
dim(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
iwquickcons(X= sports, w= c(seq(1:7)), FULL=TRUE)
data(sports)
dim(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
iwquickcons(X= sports, w= c(seq(1:7)), full=TRUE)
data(sports)
dim(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
iwquickcons(X= sports, w= c(seq(1:7)))
data(sports)
dim(sports)
P=matrix(NA,nrow=7,ncol=7)
P[1,]=c(0,5,5,10,10,10,10)
P[2,]=c(5,0,5,10,10,10,10)
P[3,]=c(5,5,0,10,10,10,10)
P[4,]=c(10,10,10,0,5,5,5)
P[5,]=c(10,10,10,5,0,5,5)
P[6,]=c(10,10,10,5,5,0,5)
P[7,]=c(10,10,10,5,5,5,0)
iwquickcons(X= sports, w= c(seq(1:7)))
library(ConsRank)
iwquickcons(X= sports, w= c(seq(1:7)))
iwquickcons(X= sports, w= c(seq(1:7)), full=TRUE)
?iwquickcons
?iwquickcons
library(ConsRank)
?iwquickcons
rcmdcheck(path="C:/Users/Antonio/Dropbox/Disco D/R projects Antonio/ConsRank")
library(ConsRank)
?iw_kemenyd
library(ConsRank)
?iw_kemenyd
?iw_kemenyd
?iw_tau_x
?iw_kemenyd
library(ConsRank)
?iw_kemenyd
devtools::load_all(".")
warnings()
data("USAranks")
USAranks
library(ConsRank)
consrank(USAranks,algorithm="bb",full=TRUE)
consrank(USAranks,algorithm="bb",full=TRUE)
consrank(USAranks,algorithm="quick",full=TRUE)
consrank(USAranks,algorithm="bb",full=TRUE)
rank2order(USAranks)
?rank2order
rank2order(USAranks,itens=c(1:50))
rank2order(USAranks,items=c(1:50))
letters[seq(1:50)]
letters(50)
letters[50]
?letters
rank2order(USAranks)
paste("O",seq(1:19),sep="")
source("C:/Users/Antonio/Dropbox/Disco D/R projects Antonio/ConsRank/R/rank2order.R", echo=TRUE)
rank2order(USAranks)
rank2order(USAranks)
rank2order(USAranks)
rank2order
devtools::load_all("C:/Users/Antonio/Dropbox/Disco D/R projects Antonio/ConsRank")
rank2order
devtools::load_all("C:/Users/Antonio/Dropbox/Disco D/R projects Antonio/ConsRank")
rank2order
rank2order(USAranks)
data("USAranks")
rank2order(USAranks)
consrank(USAranks,algorithm="quick",full=TRUE)
consrank(USAranks,algorithm="bb",full=TRUE)
consrank(USAranks,algorithm="BB",full=TRUE)
consrank(USAranks,algorithm="BB",full=TRUE,proc=TRUE)
consrank(USAranks,algorithm="FAST",full=TRUE,proc=TRUE)
consrank(USAranks,algorithm="fast",full=TRUE,proc=TRUE)
consrank(USAranks,algorithm="decor",full=TRUE,proc=TRUE)
